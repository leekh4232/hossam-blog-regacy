async function get_image_search(){const e=document.querySelector("#loading");e.classList.add("active");const t=document.querySelector("#list");1==currentPage&&Array.from(t.getElementsByTagName("li")).forEach((e,r)=>{t.removeChild(e)});let r=null;try{r=await axios.get(apiUrl,{params:{query:queryKeyword,page:currentPage},headers:{Authorization:`KakaoAK ${KAKAO_REST_KEY}`}}),console.log(r.data)}catch(e){console.error(`[Error Code] ${e.code}`),console.error(`[Error Message] ${e.message}`);let t=e.message;if(void 0!==e.response){const r=`${e.response.status} error - ${e.response.statusText}`;console.error(`[HTTP Status] ${r}`),t+=`\n${r}`}return void alert(t)}finally{e.classList.remove("active")}isEnd=r.data.meta.is_end,r.data.documents.forEach((e,r)=>{const n=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",e.url),a.setAttribute("target","_blank"),a.setAttribute("title",e.display_sitename);const s=document.createElement("span");s.classList.add("thumb");const o=document.createElement("img");o.setAttribute("src",e.thumbnail);const c=document.createElement("span");c.classList.add("text");const l=document.createElement("span");l.classList.add("title"),l.innerHTML=e.title;const d=document.createElement("span");d.classList.add("desc"),d.innerHTML=e.contents,s.appendChild(o),c.appendChild(l),c.appendChild(d),a.appendChild(s),a.appendChild(c),n.appendChild(a),t.appendChild(n)})}const KAKAO_REST_KEY="b636ff83df45f778874b079dcb979102";let currentPage=1,queryKeyword=null,isEnd=!1,apiUrl=null;document.querySelector("#searchForm").addEventListener("submit",e=>{e.preventDefault();const t=document.querySelector("#query");if(queryKeyword=t.value.trim(),!queryKeyword)return alert("검색어를 입력하세요."),void t.focus();const r=document.querySelector("#url");apiUrl=r[r.selectedIndex].value,currentPage=1,get_image_search()}),window.addEventListener("scroll",e=>{if(isEnd||document.querySelector("#loading").classList.contains("active"))return;const t=window.scrollY,r=window.screen.availHeight,n=document.body.scrollHeight;t+r>=n&&(currentPage++,get_image_search())});